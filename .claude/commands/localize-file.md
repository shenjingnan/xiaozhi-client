---
description: 将文件中的英文注释和测试用例描述翻译为中文
argument-hint: [文件路径]
---

# 文件本地化翻译

我将帮你将文件 `<path>$1</path>` 中的英文注释和测试用例描述翻译为中文，遵循项目的本地化规范。

## 分析阶段

### 1. 识别需要翻译的内容

- 搜索文件中的英文注释（以 `//` 开头的行）
- 识别 `describe` 和 `it` 函数中的英文描述
- 查找其他面向用户的英文文本
- 分析代码注释的上下文和含义

### 2. 翻译策略

- **代码注释**：将技术性英文注释翻译为准确的中文描述
- **测试描述**：将 `describe` 和 `it` 参数翻译为清晰的中文测试描述
- **保留技术术语**：API 名称、函数名、变量名、技术专有名词保持英文
- **上下文适配**：根据代码逻辑选择最贴切的中文表达

## 翻译阶段

### 3. 注释翻译

- 单行注释：将 `// English comment` 翻译为 `// 中文注释`
- 多行注释：将块注释内容完整翻译为中文
- 技术注释：确保翻译准确传达技术含义
- 代码逻辑注释：翻译时要保持与代码逻辑的一致性

### 4. 测试用例描述翻译

- `describe` 块描述：翻译测试组的主要功能描述
- `it` 用例描述：翻译具体测试场景的期望行为
- 保持测试语义：翻译后的描述要准确反映测试目的
- 使用统一的描述格式：`应该...`、`能够...`、`处理...`等

### 5. 文本内容处理

- 错误信息：将面向用户的错误信息翻译为中文
- 日志信息：将调试和日志信息中的英文文本翻译
- 配置描述：将配置相关的英文说明翻译为中文
- 用户界面文本：确保所有面向用户的文本都使用中文

## 质量保证阶段

### 6. 语法和格式检查

- 确保翻译后的中文语法正确
- 保持代码格式和缩进不变
- 检查注释符号和语法结构完整性
- 验证字符串引用和转义字符正确性

### 7. 代码功能验证

- 运行 `pnpm check:type` 确保类型检查通过
- 执行 `pnpm build` 验证代码能正常编译
- 如果是测试文件，运行 `pnpm test <文件>` 确保测试通过
- 检查翻译后的字符串没有破坏代码逻辑

### 8. 项目规范检查

- 运行 `pnpm lint` 进行代码规范检查和修复
- 确保符合项目的本地化要求
- 验证导入语句和路径别名使用正确
- 检查是否遗漏需要翻译的英文内容

## 特殊处理场景

### 测试文件特殊处理

- `describe` 参数：使用中文描述测试组功能
- `it` 参数：使用中文描述具体测试行为
- `expect` 断言：保持英文 API 调用不变
- 测试数据：测试用例中的英文数据通常保持不变

### 技术文档注释

- JSDoc 注释：将描述部分翻译为中文，参数名保持英文
- TypeScript 注释：翻译类型描述和功能说明
- API 文档：确保面向用户的 API 说明使用中文
- 代码示例：将示例中的说明文字翻译为中文

### 配置和常量

- 配置项说明：将配置相关的注释翻译为中文
- 枚举值描述：将枚举项的注释翻译为中文
- 常量说明：将常量的用途说明翻译为中文
- 错误码描述：确保错误码的描述信息使用中文

## 验证标准

### 翻译质量标准

1. **准确性**：翻译准确传达原始英文的含义
2. **一致性**：相同概念的翻译保持一致
3. **可读性**：中文表达自然流畅，符合中文技术文档习惯
4. **完整性**：所有需要翻译的内容都已翻译，无遗漏

### 代码质量标准

1. **功能完整**：翻译不破坏代码的任何功能
2. **编译通过**：代码能正常编译和运行
3. **测试通过**：相关测试用例仍然正常通过
4. **规范符合**：符合项目的代码规范和本地化要求

## 后续维护

### 翻译一致性

- 建立项目翻译词汇表，确保术语翻译一致
- 参考已有文件的翻译风格和用词习惯
- 与团队成员沟通翻译标准和规范

### 持续本地化

- 新增代码时及时进行本地化翻译
- 在代码审查中检查本地化质量
- 定期检查项目中是否有遗漏的英文内容
- 使用 `/localize-file` 命令处理新发现的英文内容

## 常用翻译参考

### 测试相关
- `should` → `应该`
- `when` → `当...时`
- `given` → `给定`
- `expect` → `期望`
- `assert` → `断言`
- `mock` → `模拟`
- `stub` → `存根`
- `setup` → `设置`
- `teardown` → `清理`

### 错误处理相关
- `error` → `错误`
- `exception` → `异常`
- `throw` → `抛出`
- `catch` → `捕获`
- `handle` → `处理`
- `fail` → `失败`
- `success` → `成功`

### 配置相关
- `config` → `配置`
- `option` → `选项`
- `parameter` → `参数`
- `setting` → `设置`
- `default` → `默认`
- `required` → `必需`
- `optional` → `可选`